## hbase在项目中的应用

摄像头采集到图片，然后对每张图片建档，如果该张图片对应的信息之前没有就建立档案， 有的话就更新档案。
档案包含3张图片id, 性别，年龄等信息，可以看做是一个json对象。 aidb用于给人脸图片聚类，输入一张图片，
如果库中已经有图片跟它相似就归到一起，没有的话就重新分到一类，会生成一个档案号，档案号也可以传指定。
所以aidb用于判断该张人脸是否在档案库，返回档案号。 目前每秒只能处理十多张，线上要求是30多张/s的需求。
es存储档案信息，用于给前端搜索展示用，输入查询条件，能够支持组合搜索。 es是存储的所有人的档案，预期规模在400万左右。
抓拍记录(抓拍的人脸图片和图片提取的信息,包括档案id)存储在hbase。 图片存储在专门的存储服务，
建立图片id和图片路径的对应的关系，hbase中所有对图片的关联都是图片id。  每天会有定时任务从hbase中读取数据统计之后
写入到hive里面供查询分析用，只会统计hbase中的增量数据，然后在hive中生成一张临时表，
再从es等档案库中加上其他信息生成最终的统计表。 每天摄像头是100万的数据，统计之后是20万人次。
从hbase生成每日归档信息的定时任务跑一次需要10分钟左右，该任务是通过spark运行的， 也就是spark指定数据源为hbase,
然后进行计算，计算后又将结果写入到hive里面，通过airflow跑定时任务。