代理和nat:

    从结构上来看，正向代理和反向代理的左右两边换了一下，原本代理服务器的客户端来自内网，与代理服务器组成一个LAN，而反向代理之后，代理服务器和服务器组成了一组.
    所以从结构来看,是reverse的，意思就是指结构图上的这种 反转，因翻译的关系，到了中文变成反向代理.其实proxy并没有做和以前有什么不同的事情.它仍旧是将来自客户端的请求转发给实际端。    
    正向代理要对client进行配置，通常用作内网访问Internet；反向代理只对代理服务器进行配置，通常用作Internet访问内网以及负载均衡，CDN技术的核心即是反向代理。
    
    反向代理服务器通过缓存网站内容用于加速,配置在应用负载均衡服务器之前, 即没有反向代理服务器, 客户端访问是通过负载均衡然后直接请求到应用服务器.
    有了反向代理服务器, 客户端请求是先到反向代理, 若反向代理上有缓存直接返回, 没有缓存,再走负载均衡到应用服务器. 
    所以实际上往往反向代理和负载均衡服务器同一台服务器完成.负载均衡是一种场景,就是能够把应用分发到多个相同功能的服务器上.
    实现负载均衡的方式有多种,比如http重定向,dns负载均衡, 四层负载均衡.进来的流量即可直接与应用服务器建立连接(如http重定向),
    也可以只与负载均衡服务器建立连接. 回去的流量也即可直接回浏览器,也可以通过负载均衡设备.反向代理是负载均衡中的一种方式,
    反向代理就是7层负载均衡, 而dnat方式是四层负载均衡.
    应用服务器前面, 所以往往两者部署在同一台服务器上.  另外两者的区别是反向代理服务器在http层做的转发,是七层负载均衡, 另外还可以使用四层负载均衡,
    在网络层SNAT, 或三层负载均衡修改mac地址.
    
    
    SNAT：私网访问公网时，将源IP转换为出口IP；DNAT是公网访问服务器，服务器前面假设了防火墙等设备；双向NAT是将源IP和目的IP都进行了转换。
    双向NAT适用场景：内网用户通过公网地址访问内网服务器。 若没有配置双向NAT，内网用户要通过域名访问内网服务器，就需要DSN mapping功能， 若配了双向NAT则不用dns mapping。 

  
 
GET和POST一个重大区别，GET产生一个TCP数据包;POST产生两个TCP数据包。长的说：对于GET方式的请求，浏览器会把http header和data一并发送出去，
服务器响应200(返回数据);而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok(返回数据)。


域名设置的默认的DNS返回的应答就是权威应答，从本地DNS（本地运营商的dns或者设定的dns）的缓存中拿到的就是非权威应答。通过ISP接入了互联网，
那么ISP就会给我分配一个DNS服务器，这个DNS服务器不是权威服务器，而是相当于一个代理的dns解析服务器，他会帮你迭代权威服务器返回的应答，然后把最终查到IP返回给你。

VLAN

    VLAN划分是解决广播域过大的问题，那么不同网段能否同属一个广播域？答案是可以的，只要接在一个交换机上。配置不同网段的IP的设备可以连在同一个交换机上，
    这样就能收到广播，只三层设备才能隔离广播域，vlan只根据交换机的端口划分。
    二层交换机只会处理以太网帧，换句话说，如果帧是广播帧，交换机肯定会转发泛洪，但如果不同ip网段，那么丢弃这个ip数据包的是主机，而不是交换机。
    开发环境中，各wb服务器及AD通过一台交换机连在一起，分为三个网段，192.168.10/20/30网段，然后出口AF作为网关192.168.10.254， AF本身又配置IP为192.168.20.24，若没有出口AF做网关，不同网段之间不能通，有了网关就能互通。
    同一个vlan可以是一个网段，也可以是不同网段，即不同网段的IP可以配在同一个vlan下面。 所以广播域的隔离只是物理上的，只要在一个交换机上就有，不管IP配的是不是同一个网段。
    http://blog.csdn.net/yiluyangguang1234/article/details/68483632
    本示例与上一节介绍的示例在配置上的唯一区别就是要通过OSPF路由协议实现连接在不同网络中的不同VLAN间三层互通。但这里要特别注意的一点是，目前在华为交换机中
    仍不能直接在物理接口上配置IP地址，只能通过把物理接口放进一个VLAN中，然后为VLAN配置VLANIF接口IP地址来实现物理接口的三层化。
    在图中已标识了各VLANIF接口的IP地址，这里要注意，虽然同为VLAN 10，但因为不是一个网段中的VLAN，所以是不同的，可以为它们的VLANIF接口配置不同网段的IP地址。
    通过OSPF协议对10.10.10.0/24、20.20.20.0/24和30.30.30.0/24三个子网的通告，就相当于通过OSPF协议实现这三个子网间的路由通信。    
    VLANIF口是三层交换机上才能建立的，也是用于跨vlan通信，二层交换机实现不了跨vlan通信。同一个vlan，网段不同的两台PC通信；不同vlan，相同网段间的通信。  
    vid是报文里面已经打上的vlanid，二pvid是端口对应的vlanid，如果给端口划定了属于哪个vlan，其pvid就是划定好的，没有划定就是1.
    vlan间通信：http://dreamfire.blog.51cto.com/418026/121273/
    http://network.51cto.com/art/201409/450885_all.htm


连接和会话的区别：

    一个连接是五元组相同，对于同一个连接中的数据包，负载均衡会将其进行NAT转换后，转发至后端固定的服务器进行处理，这是负载均衡最基本、最原始的功能。
    负载均衡系统内部会专门有一张表来记录这些连接的状况，包括：[源IP：端口]、[目的IP：端口]、[服务器IP：端口]、空闲超时时间（Idle Timeout）等等。
    负载均衡内部记录连接状态的这张表需要消耗系统的内存资源，因此，这张表不可能无限大，所有厂家都会有一定的限制。这张表的大小一般称之为最大并发连接数，
    也就是系统同时能够容纳的连接数量。考虑到建立这些连接的客户端或服务器会发生一些异常状况，导致这些连接不能被正常终结掉，因此，负载均衡的当前连接状态表项中，
    设计了一个空闲超时时间的参数。这个参数定义为，当该连接在一定时间内无流量通过时，负载均衡会自动删除该连接条目，释放系统资源。
    
    理解了连接的概念，那么对于会话的概念就会比较容易理解一些。在开发人员眼中，会话一般是指从用户登录应用系统，进行事务处理，直至退出应用系统的整个过程。
    因此，对于相同的会话，客户端可能会建立多个连接进行处理。如果在客户端和服务器之间部署了负载均衡设备，很有可能，这多个连接会被转发至不同的服务器进行处理。
    如果服务器之间没有会话信息的同步机制，会导致其他服务器无法识别用户身份，造成用户在和应用系统发生交互时出现异常。常见的异常场景包括：
    客户端输入了正确的用户名和口令，但却反复跳到登录页面，要求用户进行登录，客户端放入购物篮的物品丢失。因此，会话保持机制的意义就在于，
    确保将来自相同客户端的请求，转发至后端相同的服务器进行处理。换句话说，就是将客户端与服务器之间建立的多个连接，都发送到相同的服务器进行处理。
    
    实际上，会话保持机制与负载均衡的基本功能是完全矛盾的。负载均衡希望将来自客户端的连接、请求均衡的转发至后端的多台服务器，以避免单台服务器负载过高；
    而会话保持机制却要求将某些请求转发至同一台服务器进行处理。仅仅是谈论负载均衡，会话和连接往往具有相同的含义。在普通的客户端或服务器上，
    我们把具有相同[源地址：端口]，和相同[目的地址：端口]的数据包定义为一个连接。负载均衡系统内部会专门有一张表来记录这些连接的状况，
    包括：[源IP：端口]、[目的IP：端口]、[服务器IP：端口]、空闲超时时间（Idle Timeout）等等。这里需要特别说明一下超时时间的意义和定义。


TCP发包：

    wireshark抓包分析: http://blog.csdn.net/chenlycly/article/details/52402945
    
    发送端A发包到接收端B，发生丢包，接收端没有收到，自然没有ACK，时间达到RTO，就启动超时重传。   
    若接收方在收到一个失序的报文段后就立即发出重复确认（为的是使发送方及早知道有报文段没有到达对方），告诉A快速重传，
    而不要等到自己发送数据时捎带确认（正常情况确认号会与发送数据时一起发，提高效率）。 超时重传没有收到ACK（任何的ACK都没收到，不只是这个包的ACK），
    快速重传收到了多个ACK。 只有乱序的时候才会快速重传，但是乱序也有可能包都到了，并不丢包，所以3个以上才启动快速重传。
    http://www.cnblogs.com/lshs/p/6038547.html


cookie过期时间的漏洞，在其他地方改了密码但是因为这边已经连接，仍然保持了会话。  url中加了CRLF（回车换行）符，则将后面的信息加入到body中引发注入漏洞。
CSRF攻击，用户在访问银行网站时同时访问了危险网站，危险网站返回一个<img >链接，会自动发送请求该银行的链接，利用已有的cookie，从而绕过验证。   
SSRF攻击是利用公开的一些能够请求其他链接的网站服务发起的请求，比如在百度识图当中输入不合法的链接，通过百度去请求，如果不做校验会成功请求本地位置。文件上传有漏洞则能上传木



